<!doctype html><html lang="en-US"><head><title>Macintosh</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous"><link rel="icon" href="favicon.ico"><script defer="defer" src="./bundles/main-9b11d2.js"></script><script defer="defer" src="./bundles/mac-e9817c.js"></script><link href="css/main-28a37c.css" rel="stylesheet"><link href="css/mac-28a37c.css" rel="stylesheet"></head><body class="blog-body"><main><header><h1>1993 Macintosh PowerBook</h1><p class="lead">Welcome to my page on when I found a way to image the data off of (the first computer I ever used) a 1993 <a href="https://apple-history.com/165c" target="_blank">Macintosh PowerBook 165c</a>. These computers were based on the <a href="https://en.wikipedia.org/wiki/Motorola_68000_series" target="_blank">Motorola 680x0</a> microchip.</p></header><picture><source type="image/webp" srcset="assets/mac_station-660943.webp"><source type="image/jpeg" srcset="assets/mac_station-ee0377.jpg"><img style="width:35%;float:right" src="assets/mac_station-ee0377.jpg" alt="disassembled PowerBook 165c" width="1293" heigh="970"></picture><article><p>I inherited a Mac PowerBook 165c in August 2019 accompanied by a crate of 3.5 floppies. I had no idea if it was going to boot or if any of the data including on the floppies could ever be useful again. I was thrilled that it did boot up. The first problem I ran into though was when a floppy was put in, if the screen brightness was anything above minimum the device would just click off immediately. This felt power related so I looked up the correct power cord online and bought one. Lo-and-behold using the correct power supply fixed the first easy problem. My goal however was to make all this vintage data and software maybe not useful but at least usable again.</p></article><article><h2>9/24/2020</h2><p>The first significant lead I came across on my journy was this article <a href="https://www.macdisk.com/mden.php" target="_blank">https://www.macdisk.com/mden.php</a>. According to the paragraph "And What About DD Floppy Disks?", towards the bottom, the only way to read data off of 400K/800K floppies is to find a functioning Macintosh with a floppy drive that has GCR coding (Group Coded Recording) and variable spindle speed functionality.</p></article><article><h2>9/30/2020</h2><p>By the 28th I finally understood the 3.5 floppy disk zoo. 800K (2^19.64 = 819,200 bits), 400K (2^18.64 = 409,600 bits), 1.44MB (2^20.53 = 1,509,949 bits). There is nothing physically different from a 720K (2^19.49 = 737,280 bits) disk and an 800K disk. A variable spindle speed floppy drive can basically spin faster when the heads are near the center of the disk and likewise slower when the heads are near the outside of the disk. What this does is allow the heads to keep up by keeping the linear velocity of the spinning disk constant relative to the read/write heads which provided 80,000 more bits to be stored on a disk. This variable speed is even audibly noticable on the 165c.</p><blockquote>"USB floppy drives: Only 720K PC (FAT12) and 1.44MB disks supported: their controllers do not support constant linear velocity read/write mechanics (where the rotation slows down towards the outside of the disk to cram more data in per angular unit of length, assuming an inside to outside radii progression). They are constant angular velocity drives (constant rotational speed). They also do not support Group Coded Recording (GCR) encoding -- only Modified Frequency Modulation (MFM) -- lots of internet articles are around about GCR and MFM. 720KiB and 1.44MB disks use CAV and MFM"<footer class="blockquote-footer">working with disk images <cite title="Source Title"><a href="http://www.applefool.com/se30/moreinfo.html#Working_with_Disk_Images" target="_blank">http://www.applefool.com/se30/moreinfo.html#Working_with_Disk_Images</a></cite></footer></blockquote></article><article><h2>9/24/2020</h2><p>If I had a modern USB floppy drive that could read/write Mac formatted images then files could be correctly stored and archived on another medium. I also read about an elusive mod board called <a href="https://en.wikipedia.org/wiki/Individual_Computers_Catweasel">Catweasel</a> which appears to be made in Germany (if at all) yet if I had my hands on one it purportedly connects to a modern floppy drive and adds variable spindle speed functionality. That I am very curious about. The only site provided is here <a href="https://icomp.de/shop-icomp/en/news.html">https://icomp.de/shop-icomp/en/news.html</a>.</p><p>With that, I focused a bit and found this very comprehensive article <a href="http://www.applefool.com/se30/">http://www.applefool.com/se30/</a>. From there I found this incredibly resourceful website <a href="https://www.gryphel.com/c/minivmac/start.html">https://www.gryphel.com/c/minivmac/start.html</a>. I worked until 2AM looking for a way. I am making progress and finding appropriate and useful Mac software on the internet that I could bring over to the PowerBook. CopyRoms here <a href="https://www.gryphel.com/c/minivmac/extras/copyroms/index.html">https://www.gryphel.com/c/minivmac/extras/copyroms/index.html</a> is supposed to grab the PowerBook ROM which is necessary for virtualization/emulation but on my first try it only created a 0 byte file named PB165.ROM so I emailed the developer.</p></article><article><h2>9/29/2020 - 10:15 PM</h2><p>I knew if I could find a way to get the UNIX utility dd (device-to-device) to reach the physical floppy so that a RAW HFS image could be written to a physical floppy then I would have a way to shuffle data to and from the PowerBook. Of particular interest was the CopyRoms image above. I spent a while working with WSL (Windows Subsystem for Linux) until I found a forum thread that recommended something I had not considered. Ditch WSL and use a VM (duh). The VM I had available was Kali Linux. The Kali VM provided an interface for the external USB drive to appear as a physical drive whereas I was unsuccessful finding an approach to doing that using WSL. I was very impressed when finally, software that was loaded onto a floppy using my modern computer was working on a PowerBook Macintosh from the 90s for the first time!</p></article><article><p>A floppy is normally mounted in WSL using these common UNIX commands:</p><pre><code>$ sudo mkdir /mnt/floppy1
$ sudo mount -t drvfs a: /mnt/floppy1
$ cd /mnt/floppy1 && ls
$ sudo unmount /mnt/floppy1</code></pre></article><article><p>Writing an image that was created with certain versions of DiskCopy (DiskCopy on System 7) require extra parameters to dd. Block size 84, and skip first block:</p><p><pre><code>$ sudo dd if=/home/&lt;user&gt;/Desktop/SSW6-ZIP42.image of=/dev/sdb <strong>bs=84 skip=1</strong></code></pre></p><footer class="blockquote-footer">creating classic mac boot floppies in os x <cite title="Source Title"><a href="https://lowendmac.com/2008/creating-classic-mac-boot-floppies-in-os-x/" target="_blank">https://lowendmac.com/2008/creating-classic-mac-boot-floppies-in-os-x/</a></cite></footer></article><article><h2>9/25/2020 - 10:15 PM</h2><p>I worked on becoming more familiar with the abilities of floppies, the USB floppy drive, and images of or Mac formatted disks. I inventoried for blank and working disks. I placed an eBay order for five 1.44 MB disks. I had success imaging a blank 800K image <a href="https://www.gryphel.com/c/minivmac/extras/blanks/index.html">https://www.gryphel.com/c/minivmac/extras/blanks/index.html</a> onto a 720K floppy using my USB floppy controller drive. I am not sure why that worked exactly yet. Clearly disks formatted in 800K or 400K on a real Macintosh are not properly mountable on Windows or Linux.</p><figure><img src="assets/floppies-db59a6.png" alt="3.5 floppies" width="294" height="191"><figcaption class="blockquote-footer">floppy technical issues <cite title="Source Title"><a href="https://www.floppydisk.com/technical-issues" target="_blank">https://www.floppydisk.com/technical-issues</a></cite></figcaption></figure></article><article><h2>9/29/2020</h2><p>Sunday the 27th I got a reply form Paul Pratt <a href="mailto: gryphel@gmail.com">gryphel@gmail.com</a>, presumably the developer of CopyRoms. From the email I was generously informed that a file generated by CopyRoms that is zero bytes indicates that there is not enough disk space. I also learned that 1MB is required of the 165c ROM file. I then moved CopyRoms to the HDD of the Mac, ran CopyRoms again, and bang I had a 1MB ROM file. The file integrity of the ROM could have been verified from this list <a href="https://www.gryphel.com/c/mac68k/index.html">https://www.gryphel.com/c/mac68k/index.html</a>. A 680x0 program called Checksum is available here <a href="https://www.gryphel.com/c/sw/sysutils/index">https://www.gryphel.com/c/sw/sysutils/index.html</a> among others to compute SHAs on Mac.</p><p>I loaded the ROM into mini_VMac but I learned that mini_VMac apparently does not recognize a 165c ROM. I replied to the email from Paul Pratt with my details of the predicament including my hashes of the ROM file. I realized though that this might be expected because mini_VMac must not support the 165c ROM. While I waited for a reply I dug around for other options of which I was aware of a few candidates.</p><p>I settled on "Basilisk II" <a href="https://www.emaculation.com/doku.php/basilisk_ii_setup">https://www.emaculation.com/doku.php/basilisk_ii_setup</a>, the first emulator that gave me the expected blinking floppy disk reported in emulation guides <a href="https://www.gryphel.com/c/minivmac/start.html">https://www.gryphel.com/c/minivmac/start.html</a> as indicating that the ROM file is working. After a few hours of trial and error I successfully installed MacOS 7.6.1 onto a virtual volume.</p><p>The first thing I did with Basilisk II was add an image of a floppy I made earlier consisting of a few Word files off of the PowerBook to the emulator volumes.</p><p>On Monday, the 28th the 5 blank 1.44 MB floppies I ordered showed up and I also took a leap by installing a shareware program called DropStuff <a href="https://www.gryphel.com/c/sw/archive/dropstuf/index.html">https://www.gryphel.com/c/sw/archive/dropstuf/index.html</a> which provides the inverse functionality to StuffIt <a href="https://www.gryphel.com/c/sw/archive/stuffexp/index.html">https://www.gryphel.com/c/sw/archive/stuffexp/index.html</a> onto the source Mac. I wrote the image of DropStuff onto a floppy the same way I did CopyRoms. At least now with DropStuff I could compress files before writing them to a floppy which I would then carry to the destination storage medium via sneaker-net as opposed to uncompressed files that I would then be required to make more raw images of before they could be stored on the modern machine which was also proving unreliable at times. Compressing files also had the added benefit that the compressed files (.sit) were correctly preserved with the HFS (Hierarchical File System) resource fork data not to be confused with the MFS (Macintosh File System).</p><p>There was quite a learning curve to all these file types. Here are a few notes I made from my experience.</p><ul><li>.sit, some of these are extracted in System 7 with the StuffIt 5.5 program. Others are extracted in a modern OS using the modern version of StuffIt. The file extension doesn’t indicate such so one must be subjective.</li><li>.bin, StuffIt 5.5 in System 7 is used to marshal a file out of binary format.</li><li>.hqx, these are extracted in macOS.</li><li>.toast, these are mountable in System 7 using the emulator volume selection tool.</li><li>.img, some are mountable in System 7 using the emulator volume tool. Others are only mountable using a System 7 program called DiskCopy; of which there are many versions. Some files are specific to certain versions of DiskCopy.</li><li>.dsk, mountable in System 7 using the emulator volume selector tool.</li></ul><p></p><p>It turned out the only personal file on the Mac that was too large to fit on a floppy even with .sit compression was the "Amazon Trail Color" game file.</p><p><button class="btn-primary" id="protect-btn">Protected Paragraph</button></p><div id="authForm" class="protect"><label for="pwd">Password:</label> <input type="password" id="pwd" name="pwd"> <button class="btn-primary" id="chkPswd">Authenticate</button></div><div id="content" class="protect"></div><p></p></article><article><h2>9/30/2020 2:20 AM</h2><p>Yesterday I ordered a SCSI controller card from newegg. My next move is to see if I can image the whole drive. Potentially boot from an image of the drive itself. That would be impressive. Normal forensics would usually involve an off-line image the HDD. I am excited to see where that takes me. If I can properly image the drive I could potentially have some fun with the Mac hardware. Maybe, wipe the drive and start fresh for whatever reason I might want to do that. Then I could feel comfortable emptying the recycling bin too.</p><h2>3:19 PM</h2><p>Throwing all kinds of software on a computer and compressing files one-by-one so that they fit on 1.44 MB floppies then carrying those floppies back-and-forth over to a workstation is not ideal (or sound for that matter) forensics. I look forward to what capabilities the SCSI controller card will bring.</p></article><article><p></p><h2>10/9/2020</h2>I am going to try to connect the HDD directly to a Windows PC today with the SCSI card, adapters and cables. I hope I don’t damage anything.<p></p><figure><img src="assets/PXL_20201009_173521483-ce2645.jpg" alt="open pc with scsi hdd connected to scsi adapter" width="707" height="612"><figcaption><h2>11:30 PM</h2>I had good luck today. It went exactly as planned. The image I made of the physical media with FTK was perfectly bootable with Basilisk II which was very impressive.</figcaption></figure><figure><pre>Physical Evidentiary Item (Source) Information:
[Device Info]
Source Type: Physical
[Drive Geometry]
Cylinders: 41
Tracks per Cylinder: 255
Sectors per Track: 63
Bytes per Sector: 512
Sector Count: 672,525
[Physical Drive Information]
Drive Model: IBM DHAS-2344 SCSI Disk Device
Drive Interface Type: SCSI
Removable drive: False
Source data size: 328 MB
Sector count:    672525

Image Information:
Acquisition started:   Fri Oct  9 17:37:12 2020
Acquisition finished:  Fri Oct  9 17:41:27 2020

MD5 checksum:    d95789db48eceabb4d8e0c5f58b6f6a6 : verified
SHA1 checksum:   c59d38d42509773231aff4b15d36e9ed8c73e20c : verified</pre><figcaption>As you can see from the FTK Imager report it took all of 4 minutes to complete the image of the entire 328MB system drive.</figcaption></figure></article><figure><a class="js-video-button" data-video-id="Iti9lJoEC0A"><img class="video_thmb img-fluid lazyload" width="480" height="360" src="https://img.youtube.com/vi/Iti9lJoEC0A/0.jpg" alt="old mac video"></a><figcaption>Enjoy a video I made using the software in the Basilsk II emulator.<aside><ul><li><a href="https://en.wikipedia.org/wiki/System_7" target="_blank">Macintosh System Software 7.6.1</a></li><li><a href="http://basilisk.cebix.net/" target="_blank">Basilsk II emulator</a></li></ul></aside></figcaption></figure><footer><a href="/"><button class="back-btn">Back</button></a> <button class="to-top" title="Go to top">Top</button></footer></main><script src="js/jquery-3.3.1.min.js"></script><script src="js/jquery-modal-video.min.js"></script><script>$(".js-video-button").modalVideo({youtube:{controls:1,nocookie:!0}})</script></body></html>